<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>course15-jsAjax基础</title>
		<script src="ajax.js"></script>
	</head>
	<body>
		
		<!---------------- Ajax基础 ------------------>
		<h3>Ajax：不需要刷新页面，就可以读取服务器的数据。应用于登录、注册、在线聊天等。</h3>
		<button id="btn">button</button>
		<script>
			var oBtn= document.getElementById("btn");			
			oBtn.onclick=function(){
				ajax("aaa.txt?t=" + new Date().getTime(),function(str){	//URL后加？t=时间，来阻止缓存
					alert(str);
				},function(){
					alert("失败");
				})
			}
		</script>
		
		
		<!---------------- Ajax应用二 ------------------>
		<h3>Ajax读取数据表里的数据</h3>
		<button id="btn1">读取</button>
		<script>
			var oBtn=document.getElementById("btn1");
			oBtn.onclick=function(){
				ajax("01arr.txt?t=" + new Date().getTime(), function(str){	//ajax读取的内容是字符串的形式
					var 01arr = eval(str);	//eval()用于计算字符串的值
					alert(str);		//弹出字符串
					alert(arr);		//弹出字符串的值
				},function(){
					alert("失败");
				});
			}
		</script>
		
		
		<!---------------- Ajax应用三 ------------------>
		<h3>Ajax读取数据表，并展示出来</h3>
		<button id="btn2">展示数据表</button>
		<ul id="ul">
		</ul>
		<script>
			var oBtn2=document.getElementById("btn2");
			var oUl=document.getElementById("ul");
			oBtn2.onclick=function(){
				ajax("data.txt?t=" + new Date().getTime(), function(str){	//ajax读取的内容是字符串的形式
					var 01arr = eval(str);
					for(var i=0; i<arr.length; i++){
						var oLi = document.createElement("li");		//创建li
//						alert(01arr[0].user);
						oLi.innerHTML="用户名：<strong>"+arr[i].user+"</strong> &nbsp; 密码：<span>"+arr[i].pass+"</span>";		
						oUl.appendChild(oLi);	//把li插入ul
					}
				},function(){
					alert("失败");
				});
			}
		</script>
		
		
	</body>
</html>
