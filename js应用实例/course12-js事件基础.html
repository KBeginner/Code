<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>course12-js事件基础</title>		
	</head>
	<body>
		
		<!---------------- event对象 ------------------>
		<h3>event对象:查看鼠标的坐标</h3>
		<button id="btn">clientX/Y</button>		
		<script>
			var oBtn=document.getElementById("btn");			
			oBtn.onclick=function(){
				document.onclick=function(ev){
					
					//兼容IE和Chrome，Firefox不兼容
//					alert(event.clientX+","+event.clientY);
					
					//兼容Firefox和Chrome，IE不兼容
//					alert(ev.clientX+","+ev.clientY);
					
					var oEvent= ev || event;
					alert(oEvent.clientX+","+oEvent.clientY);
				}
			}
		</script>
		
		
		
		<!---------------- 事件冒泡（事件流） ------------------><hr />
		<h3>事件冒泡（事件流）：子元素依次往上找父元素，直到最高级document</h3>
		<div id="div" style="background: #00008B;">
			<div class="div_class" style="background: #1E90FF;">
				<div style="background: #375069;"></div>
			</div>
		</div>
		
		<style>
			#div{
				width: 500px;height: 300px;
			}
			#div .div_class{
				width: 400px;height: 220px;
			}
			#div .div_class div{
				width: 300px;height: 120px;
			}
			#div1{
				width: 300px;height: 300px;background: #375069;display: none;
			}		
		</style>
		
		<script>
			var oDiv=document.getElementById("div");
			var oDiv_class=oDiv.getElementsByTagName("div")[0];
			var oDiv_classChild=oDiv_class.getElementsByTagName("div")[0];
			
			oDiv.onclick=function(){
				alert(this.style.background);
			};
			oDiv_class.onclick=function(){
				alert(this.style.background);
			};
			oDiv_classChild.onclick=function(){
				alert(this.style.background);
			};
			
		</script>
		
		
		
		<!---------------- 取消冒泡 ------------------><hr />
		<h3>取消冒泡：oEvent.cancelBubble</h3>
		<button id="btn1">展开</button>
		<div id="div1"></div>
		
		<script>
			var oBtn1=document.getElementById("btn1");
			var oDiv1=document.getElementById("div1");
			
			oBtn1.onclick=function(ev){
				oDiv1.style.display="block";
				var oEvent=ev||event;
				oEvent.cancelBubble=true;	//取消冒泡，当不取消时，会继续执document.onclick=function()
			};
			document.onclick=function(){
				oDiv1.style.display="none";
//				alert("冒泡测试");
			};			
		</script>
		
				
		
		<!---------------- 鼠标坐标应用 ------------------><hr />
		<h3>鼠标坐标应用：div跟随鼠标移动</h3>
		<button id="btn2">启动</button>
		<div class="parentDiv">
			<div id="div2"></div>
		</div>
		<style>
			.parentDiv{height: 100px;}
			#div2{
				width: 100px;height: 100px;background: #375069;position: absolute;
			}
		</style>
		
		<script>			
			//封装一个鼠标定位函数
			function getPos(ev){
				var scrollTop=document.documentElement.scrollTop || document.body.scrollTop;
				var scrollLeft=document.documentElement.scrollLeft || document.body.scrollLeft;				
				var oEvent=ev || event;				
				return {x:oEvent.clientX+scrollLeft, y:oEvent.clientY+scrollTop};
			};
			
			var oBtn2=document.getElementById("btn2");
			var oDiv2=document.getElementById("div2");
			oBtn2.onclick=function(){
				document.onmousemove=function(ev){
					var oEvent=ev || event;
					var pos=getPos(oEvent);		//获取鼠标坐标
					oDiv2.style.left=pos.x + "px";	//div跟随鼠标左右移动					
					oDiv2.style.top=pos.y + "px";	//div跟随鼠标上下移动						
				};
			};			
			</script>
			
			
		<!---------------- 鼠标坐标应用二：多个div跟着鼠标做 ------------------><hr />
		<div id="div3">
			<h3>鼠标坐标应用二：多个div跟着鼠标做，后一个跟着前一个，第一个跟着鼠标</h3>	
			<button id="btn3">启动</button>
			<div></div><div></div><div></div><div></div><div>
			</div><div></div><div></div><div></div><div></div>
			</div><div></div><div></div><div></div><div></div>
		</div>
		
		<style>
			#div3{height: 100px;}
			#div3 div{
				width: 20px;height: 20px;border-radius: 10px;background: #375069;position: absolute;
			}
		</style>
		
		<script>
			var oBtn3=document.getElementById("btn3");
			var oDiv3=document.getElementById("div3");
			var aDiv=oDiv3.getElementsByTagName("div");
			
			oBtn3.onclick=function(){
				document.onmousemove=function(ev){					
					var oEvent= ev||event;
					var pos=getPos(oEvent);	  //获取鼠标坐标
					for(var i=aDiv.length-1; i>0; i--){		//反过来遍历，从后面依次往前计算它的移动位置		
						aDiv[i].style.left=aDiv[i-1].offsetLeft+"px";	
						aDiv[i].style.top=aDiv[i-1].offsetTop+"px";														
					}				
					aDiv[0].style.left=pos.x+"px";	//第一个的移动位置等于鼠标移动位置
					aDiv[0].style.top=pos.y+"px";
				};		
			};
		</script>
		
		
		
		<!---------------- 查看键盘的keyCode ------------------><hr />
		<h3>查看键盘编码keyCode</h3>
		<button id="btn4">查看keyCode</button>
		
		<script>
			var oBtn4=document.getElementById("btn4");
			oBtn4.onclick=function(){
				document.onkeydown=function(ev){	//onkeydown键盘按下事件，onkeyup键盘弹起事件
					var oEvent= ev||event;
					alert(oEvent.keyCode);	//查看keyCode键盘编码
				}
			}
		</script>
	
	
		
		<!---------------- 键盘控制div的移动 ------------------><hr />
		<h3>键盘控制div的移动</h3>
		<div class="parentDiv">
			<button id="btn5">启动</button>
			<div id="div4"></div>
		</div>	
		
		<style>
			.parentDiv{height: 120px;}
			#div4{
				width: 100px;height: 100px;background: green;position: absolute;
			}
		</style>
		
		<script>
			var oBtn5=document.getElementById("btn5");
			var oDiv4=document.getElementById("div4");
			oBtn5.onclick=function(){
				document.onkeydown=function(ev){
					var oEvent= ev||event;
					/*if(oEvent.keyCode==37){
						oDiv4.style.left=oDiv4.offsetLeft-40+"px";
					}
					else if(oEvent.keyCode==39){
						oDiv4.style.left=oDiv4.offsetLeft+40+"px";
					}
					else if(oEvent.keyCode==38){
						oDiv4.style.top=oDiv4.offsetTop-50+"px";
					}
					else if(oEvent.keyCode==40){
						oDiv4.style.top=oDiv4.offsetTop+50+"px";
					}*/					
					switch(oEvent.keyCode){
						case 37: oDiv4.style.left=oDiv4.offsetLeft-40+"px"; break;	//keyCode=37左键，按下左键left减小，往左运动
						case 39: oDiv4.style.left=oDiv4.offsetLeft+40+"px"; break;	//keyCode=39右键，按下右键left增大，往右运动
						case 38: oDiv4.style.top=oDiv4.offsetTop-50+"px"; break;	//keyCode=38上键，按下上键top减小，往上运动	
						case 40: oDiv4.style.top=oDiv4.offsetTop+50+"px"; break;	//keyCode=40下键，按下下键top增大，往下运动	
						default: alert("请使用方向键控制");		//按其他按键，弹出框提示
					}
				};
			};
		</script>
		
		
		<!---------------- ctrl+enter提交留言 ------------------><hr />
		<h3>ctrl+enter提交留言（enter键的keyCode=13，ctrl键使用ctrlKey）</h3>
		<p>ctrl---ctrlKey，shift---shiftKey，alt---altKey</p>
		<input id="txt" type="text" placeholder="请输入留言，并按Ctrl+Enter提交" /> <br />
		<textarea id="txt1" placeholder="留言板" readonly="readonly"></textarea>
		
		<style>
			#txt{width: 300px;height: 20px;margin-bottom: 10px;}
			#txt1 {
				width: 300px;height: 300px;
			}
		</style>
		
		<script>
			var oTxt=document.getElementById("txt");
			var oTxt1=document.getElementById("txt1");
			oTxt.onkeydown=function(ev){
				var oEvent= ev||event;
				if(oEvent.keyCode==13 && oEvent.ctrlKey && oTxt.value!=""){	//同时按下Ctrl+Enter键，并且文本框不为空时，提交留言
					oTxt1.value+=oTxt.value+"\n";  //文本域的value等于文本框的value累加
					oTxt.value="";
				}
			};
		</script>
	</body>
</html>
