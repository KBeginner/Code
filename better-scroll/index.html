<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>better-scroll</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/vant@2.0/lib/index.css">
    <style>
        ul, li{
            margin: 0;
            padding: 0;
        }
        #demo{ 
            width:100%;
            height:15rem;
            line-height: 30rem;
            overflow:hidden;
            /* white-space: nowrap; */
        }
        #demo .header, #demo .content{
            width:auto;
            height:auto;
            /* border: 1px solid red; */
            white-space: nowrap;
        }
        .header li, .content li{
            display: inline-block;
        }
        .header li{
            margin: 0 1rem
        }
    </style>
</head>
<body>
    <!-- <div id="demo" ref="wrap">
        <ul class="content" ref="tab">
            <li>'😀 😁 😂 🤣 😃', </li>
            <li>'😀 😁 😂 🤣 😃', </li>
            <li>'😄 😅 😆 😉 😊', </li>
            <li>'😫 😴 😌 😛 😜', </li>
            <li>'😀 😁 😂 🤣 😃', </li>
            <li>'😀 😁 😂 🤣 😃', </li>
            <li>'😄 😅 😆 😉 😊', </li>
            <li>'😫 😴 😌 😛 😜', </li>
            <li>'😀 😁 😂 🤣 😃', </li>
            <li>'😀 😁 😂 🤣 😃', </li>
            <li>'😄 😅 😆 😉 😊', </li>
            <li>'😫 😴 😌 😛 😜', </li>
            <li>'😀 😁 😂 🤣 😃', </li>
            <li>'😀 😁 😂 🤣 😃', </li>
            <li>'😄 😅 😆 😉 😊', </li>
            <li>'😫 😴 😌 😛 😜', </li>
            <li>'😀 😁 😂 🤣 😃', </li>
            <li>'😀 😁 😂 🤣 😃', </li>
            <li>'😄 😅 😆 😉 😊', </li>
            <li>'😫 😴 😌 😛 😜', </li>
            <li>'😀 😁 😂 🤣 😃', </li>
            <li>'😀 😁 😂 🤣 😃', </li>
            <li>'😄 😅 😆 😉 😊', </li>
            <li>'😫 😴 😌 😛 😜', </li>
        </ul>
    </div> -->
    <div id="demo" ref="wrap">
        <van-list>
            <van-cell>
                <ul class="header">
                    <li>公司简称</li>
                    <li>收盘价</li>
                    <li>涨幅</li>
                    <li>振幅</li>
                    <li>成交量</li>
                    <li>成交金额</li>
                </ul>
            </van-cell>
            <van-cell
                v-for="item in list"
                :key="item.product"
            >
                <ul class="content" ref="tab">
                    <li>{{item.productname}}</li>
                    <li>{{item.closeprice}}</li>
                    <li>{{item.totalchng}}</li>
                    <li>{{item.totalchanges}}</li>
                    <li>{{item.totalvol}}</li>
                    <li>{{item.totalamt}}</li>
                </ul>
            </van-cell>
        </van-list>
    </div>
<script src="https://cdn.jsdelivr.net/npm/vue"></script>
<script src="./better-scroll@1.15.2.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vant@2.0/lib/vant.min.js"></script>
<script>
    window.onload = ()=>{
        new Vue({
            el:'#demo',
            data() {
                return {
                    list:[
                        {
                            closeprice: "3.77",         
                            evgprice: "3.79",
                            openprice: "3.79",
                            product: "601899",
                            productname: "紫金矿业",
                            totalamt: "121828.8356",
                            totalchanges: "3.4",
                            totalchng: "1.07",
                            totalexchrate: "1.89",
                            totalvol: "31909.8708",
                            tx_rank: 1,
                        },
                        {
                            closeprice: "3.77",
                            evgprice: "3.79",
                            openprice: "3.79",
                            product: "601899",
                            productname: "紫金矿业",
                            totalamt: "121828.8356",
                            totalchanges: "3.4",
                            totalchng: "1.07",
                            totalexchrate: "1.89",
                            totalvol: "31909.8708",
                            tx_rank: 1,
                        },
                        {
                            closeprice: "3.77",
                            evgprice: "3.79",
                            openprice: "3.79",
                            product: "601899",
                            productname: "紫金矿业",
                            totalamt: "121828.8356",
                            totalchanges: "3.4",
                            totalchng: "1.07",
                            totalexchrate: "1.89",
                            totalvol: "31909.8708",
                            tx_rank: 1,
                        },
                        {
                            closeprice: "3.77",
                            evgprice: "3.79",
                            openprice: "3.79",
                            product: "601899",
                            productname: "紫金矿业",
                            totalamt: "121828.8356",
                            totalchanges: "3.4",
                            totalchng: "1.07",
                            totalexchrate: "1.89",
                            totalvol: "31909.8708",
                            tx_rank: 1,
                        },
                        {
                            closeprice: "3.77",
                            evgprice: "3.79",
                            openprice: "3.79",
                            product: "601899",
                            productname: "紫金矿业",
                            totalamt: "121828.8356",
                            totalchanges: "3.4",
                            totalchng: "1.07",
                            totalexchrate: "1.89",
                            totalvol: "31909.8708",
                            tx_rank: 1,
                        },
                        {
                            closeprice: "3.77",
                            evgprice: "3.79",
                            openprice: "3.79",
                            product: "601899",
                            productname: "紫金矿业",
                            totalamt: "121828.8356",
                            totalchanges: "3.4",
                            totalchng: "1.07",
                            totalexchrate: "1.89",
                            totalvol: "31909.8708",
                            tx_rank: 1,
                        },
                        {
                            closeprice: "3.77",
                            evgprice: "3.79",
                            openprice: "3.79",
                            product: "601899",
                            productname: "紫金矿业",
                            totalamt: "121828.8356",
                            totalchanges: "3.4",
                            totalchng: "1.07",
                            totalexchrate: "1.89",
                            totalvol: "31909.8708",
                            tx_rank: 1,
                        },
                        {
                            closeprice: "3.77",
                            evgprice: "3.79",
                            openprice: "3.79",
                            product: "601899",
                            productname: "紫金矿业",
                            totalamt: "121828.8356",
                            totalchanges: "3.4",
                            totalchng: "1.07",
                            totalexchrate: "1.89",
                            totalvol: "31909.8708",
                            tx_rank: 1,
                        },
                        {
                            closeprice: "3.77",
                            evgprice: "3.79",
                            openprice: "3.79",
                            product: "601899",
                            productname: "紫金矿业",
                            totalamt: "121828.8356",
                            totalchanges: "3.4",
                            totalchng: "1.07",
                            totalexchrate: "1.89",
                            totalvol: "31909.8708",
                            tx_rank: 1,
                        },
                        {
                            closeprice: "3.77",
                            evgprice: "3.79",
                            openprice: "3.79",
                            product: "601899",
                            productname: "紫金矿业",
                            totalamt: "121828.8356",
                            totalchanges: "3.4",
                            totalchng: "1.07",
                            totalexchrate: "1.89",
                            totalvol: "31909.8708",
                            tx_rank: 1,
                        },
                        {
                            closeprice: "3.77",
                            evgprice: "3.79",
                            openprice: "3.79",
                            product: "601899",
                            productname: "紫金矿业",
                            totalamt: "121828.8356",
                            totalchanges: "3.4",
                            totalchng: "1.07",
                            totalexchrate: "1.89",
                            totalvol: "31909.8708",
                            tx_rank: 1,
                        },
                        {
                            closeprice: "3.77",
                            evgprice: "3.79",
                            openprice: "3.79",
                            product: "601899",
                            productname: "紫金矿业",
                            totalamt: "121828.8356",
                            totalchanges: "3.4",
                            totalchng: "1.07",
                            totalexchrate: "1.89",
                            totalvol: "31909.8708",
                            tx_rank: 1,
                        }
                    ]
                }
            },
            mounted() {
                this.$nextTick(_=>{
                    this.setBodyAutoWidth()
                    // this.setTabWidth()
                    setTimeout(_=>{
                        this.initSroll()
                    }, 0)
                })
            },
            methods: {
                setBodyAutoWidth(){
                    let header = this.$refs.wrap.querySelectorAll('.header li')
                    
                },
                setTabWidth(){
                    let w = 0
                    let lis = this.$refs.wrap.querySelectorAll('li')
                    lis.forEach(ele => w+=(ele.offsetWidth+5));
                    // lis.forEach(ele => w+=ele.offsetWidth);
                    this.$refs.tab.style.width = `${w}px`
                },
                initSroll(){
                    if (!this.BScroll) {
                        this.BScroll = new BScroll(this.$refs.wrap, {
                            scrollX: true,
                            scrollY: true,
                            click: true,
                            bounce: false,
                            probeType: 3,
                            //下拉刷新：可以配置顶部下拉的距离（threshold） 来决定刷新时机以及回弹停留的距离（stop）
                            //这个配置用于做上拉加载功能，默认为 false。当设置为 true 或者是一个 Object 的时候，可以开启上拉加载
                            pullUpLoad: {
                                threshold: 10
                            },
                            mouseWheel: {    // pc端同样能滑动
                                speed: 20,
                                invert: false
                            },
                            useTransition:false  // 防止iphone微信滑动卡顿
                        })
                    } else {
                        this.BScroll.refresh()
                    }
                    this.BScroll.on("pullingUp", ()=>{
                        console.log('加载ajax数据');
                        this.BScroll.finishPullUp();     //可以多次执行上拉刷新
                    });
                }
            },
        })
    }
    /* let oScroll = new BScroll(".wrap", {
        scrollX: true,
        click: true,
        probeType: 3,
        //下拉刷新：可以配置顶部下拉的距离（threshold） 来决定刷新时机以及回弹停留的距离（stop）
        //这个配置用于做上拉加载功能，默认为 false。当设置为 true 或者是一个 Object 的时候，可以开启上拉加载
        pullUpLoad: {
            threshold: 10
        },
        mouseWheel: {    // pc端同样能滑动
            speed: 20,
            invert: false
        },
        useTransition:false  // 防止iphone微信滑动卡顿
    });
    oScroll.on("pullingUp",function(){
        //alert('已到最底部');
        console.log('加载ajax数据');
        oScroll.finishPullUp();     //可以多次执行上拉刷新
    });
    oScroll.refresh(); */
</script>
</body>
</html>